schema: '2.0'
stages:
  download_data:
    cmd: python src/data/download_data.py --script_path="scripts/select_comments.sql"
      --save_path="data/initial_data/comments.parquet" && python src/data/download_data.py
      --script_path="scripts/select_tags.sql" --save_path="data/initial_data/tags.parquet"
    deps:
    - path: config.yaml
      hash: md5
      md5: 69cf9fb6fdeb8416fd67a0bb863a7dd9
      size: 782
    - path: scripts/select_comments.sql
      hash: md5
      md5: 9bc5cd67ab4f97980995d11d5b77a51a
      size: 27
    - path: scripts/select_tags.sql
      hash: md5
      md5: f29049db26dbbbda0a24b8f81e97d751
      size: 23
    - path: src/data/download_data.py
      hash: md5
      md5: 0a6b459fb0cab0590e910b15ed19c041
      size: 1138
    outs:
    - path: data/initial_data/comments.parquet
      hash: md5
      md5: 055eeb8001098c7b99ceb64a30974997
      size: 1277506
      cloud:
        minio:
          etag: 055eeb8001098c7b99ceb64a30974997
          version_id: d41f7d82-4b39-4d05-a1bf-54e389935a7e
    - path: data/initial_data/tags.parquet
      hash: md5
      md5: 3a40fad4c7fae36b802f4e8b1fb3bf30
      size: 6684
      cloud:
        minio:
          etag: 3a40fad4c7fae36b802f4e8b1fb3bf30
          version_id: e728acbc-7f51-4fe2-a291-d9a27bca1309
  prepare_data:
    cmd: python src/data/prepare_data.py --comments_path="data/initial_data/comments.parquet"
      --tags_path="data/initial_data/tags.parquet" --save_path="data/intermediate_data/comments_tags.parquet"
    deps:
    - path: config.yaml
      hash: md5
      md5: 69cf9fb6fdeb8416fd67a0bb863a7dd9
      size: 782
    - path: data/initial_data/comments.parquet
      hash: md5
      md5: 055eeb8001098c7b99ceb64a30974997
      size: 1277506
    - path: data/initial_data/tags.parquet
      hash: md5
      md5: 3a40fad4c7fae36b802f4e8b1fb3bf30
      size: 6684
    - path: src/data/prepare_data.py
      hash: md5
      md5: d5aa863b6752ba0394259ac36ed8583e
      size: 899
    outs:
    - path: data/intermediate_data/comments_tags.parquet
      hash: md5
      md5: 28f51ea82daeb34255a0ff28ef1d0814
      size: 1292973
      cloud:
        minio:
          etag: 28f51ea82daeb34255a0ff28ef1d0814
          version_id: 8048f0da-2e9e-45b1-b2d3-94b32f787363
  get_tags:
    cmd: python src/data/get_tags.py --df_path="data/intermediate_data/comments_tags.parquet"
      --save_path="data/intermediate_data/df_tagged.parquet"
    deps:
    - path: config.yaml
      hash: md5
      md5: 69cf9fb6fdeb8416fd67a0bb863a7dd9
      size: 782
    - path: data/intermediate_data/comments_tags.parquet
      hash: md5
      md5: 28f51ea82daeb34255a0ff28ef1d0814
      size: 1292973
    - path: models/roberta/models--AlexKay--xlm-roberta-large-qa-multilingual-finedtuned-ru
      hash: md5
      files:
      - relpath: .no_exist/6cc14366f0cc95428a695d30594a93dd6935d800/added_tokens.json
        md5: d41d8cd98f00b204e9800998ecf8427e
      - relpath: .no_exist/6cc14366f0cc95428a695d30594a93dd6935d800/model.safetensors
        md5: d41d8cd98f00b204e9800998ecf8427e
      - relpath: .no_exist/6cc14366f0cc95428a695d30594a93dd6935d800/model.safetensors.index.json
        md5: d41d8cd98f00b204e9800998ecf8427e
      - relpath: blobs/154f43c670c33e76b909e3c6c7a9d3d89402579fb6cd1a0414a98d3e165346cd
        md5: 85428479f4a9f2b2896783468970ce57
      - relpath: blobs/3dbb2cf43b7d63b00d2fd65e77d1522abf82562b
        md5: 3fd33a2bd999bf8fbfea9fd64e6d6770
      - relpath: blobs/6cd1d9021e10d47aed59399af6b0e30312b46ca4
        md5: 72e6c8ab541f1ff24b139c96216fe8c9
      - relpath: blobs/be40185617dee2e5940b7ad8c9aec5fc8babcf2a
        md5: 6151a01f28dc31a96d6933ff0648c85c
      - relpath: blobs/cfc8146abe2a0488e9e2a0c56de7952f7c11ab059eca145a0a727afce0db2865
        md5: bf25eb5120ad92ef5c7d8596b5dc4046
      - relpath: blobs/ee317c016226c12022b10f06e5f95f53c284407e
        md5: cdbd02dc6d8c7a736ddb383d85d85877
      - relpath: refs/main
        md5: 5b82c7d5b69fd14015bda8a3573af1ec
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/config.json
        md5: 3fd33a2bd999bf8fbfea9fd64e6d6770
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/pytorch_model.bin
        md5: 85428479f4a9f2b2896783468970ce57
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/sentencepiece.bpe.model
        md5: bf25eb5120ad92ef5c7d8596b5dc4046
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/special_tokens_map.json
        md5: 72e6c8ab541f1ff24b139c96216fe8c9
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/tokenizer.json
        md5: 6151a01f28dc31a96d6933ff0648c85c
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/tokenizer_config.json
        md5: cdbd02dc6d8c7a736ddb383d85d85877
    - path: src/data/get_tags.py
      hash: md5
      md5: f3ec4a236f55941ebc24abbb7a735af6
      size: 1501
    - path: src/models/roberta.py
      hash: md5
      md5: 0f0cdcb53584df45eba1d718ac6d0d7e
      size: 9816
    outs:
    - path: data/intermediate_data/df_tagged.parquet
      hash: md5
      md5: 42e0d5a1de3299931e8c13699b1c4fec
      size: 1940855
      cloud:
        minio:
          etag: 42e0d5a1de3299931e8c13699b1c4fec
          version_id: 09f02aea-19ae-4fd8-85b4-37d2a6b56d69
  get_final_df:
    cmd: python src/data/get_final_df.py --df_tagged_path="data/intermediate_data/df_tagged.parquet"
      --save_path="data/prepared_data/prepared_df.parquet"
    deps:
    - path: config.yaml
      hash: md5
      md5: 69cf9fb6fdeb8416fd67a0bb863a7dd9
      size: 782
    - path: data/intermediate_data/df_tagged.parquet
      hash: md5
      md5: 42e0d5a1de3299931e8c13699b1c4fec
      size: 1940855
    - path: src/data/get_final_df.py
      hash: md5
      md5: 4f6631d75ab74fb9ea15497174c7fef4
      size: 1175
    outs:
    - path: data/prepared_data/prepared_df.parquet
      hash: md5
      md5: d8f3b1448998737421e0b48d0ad1fdad
      size: 2140664
      cloud:
        minio:
          etag: d8f3b1448998737421e0b48d0ad1fdad
          version_id: 66d90ffe-b9d3-4629-bab2-2f6330e4fa0c

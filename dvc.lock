schema: '2.0'
stages:
  download_data:
    cmd: python src/data/download_data.py --script_path="scripts/select_comments.sql"
      --save_path="data/initial_data/comments.parquet" && python src/data/download_data.py
      --script_path="scripts/select_tags.sql" --save_path="data/initial_data/tags.parquet"
    deps:
    - path: config.yaml
      hash: md5
      md5: 426b96727f7279748f8b2a6bf8d4bfec
      size: 581
    - path: scripts/select_comments.sql
      hash: md5
      md5: 9bc5cd67ab4f97980995d11d5b77a51a
      size: 27
    - path: scripts/select_tags.sql
      hash: md5
      md5: f29049db26dbbbda0a24b8f81e97d751
      size: 23
    - path: src/data/download_data.py
      hash: md5
      md5: 0a6b459fb0cab0590e910b15ed19c041
      size: 1138
    outs:
    - path: data/initial_data/comments.parquet
      hash: md5
      md5: 055eeb8001098c7b99ceb64a30974997
      size: 1277506
      cloud:
        minio:
          etag: 055eeb8001098c7b99ceb64a30974997
          version_id: d41f7d82-4b39-4d05-a1bf-54e389935a7e
    - path: data/initial_data/tags.parquet
      hash: md5
      md5: 3a40fad4c7fae36b802f4e8b1fb3bf30
      size: 6684
      cloud:
        minio:
          etag: 3a40fad4c7fae36b802f4e8b1fb3bf30
          version_id: e728acbc-7f51-4fe2-a291-d9a27bca1309
  prepare_data:
    cmd: python src/data/prepare_data.py --comments_path="data/initial_data/comments.parquet"
      --tags_path="data/initial_data/tags.parquet" --save_path="data/intermediate_data/comments_tags.parquet"
    deps:
    - path: config.yaml
      hash: md5
      md5: 426b96727f7279748f8b2a6bf8d4bfec
      size: 581
    - path: src/data/prepare_data.py
      hash: md5
      md5: d5aa863b6752ba0394259ac36ed8583e
      size: 899
    outs:
    - path: data/intermediate_data/comments_tags.parquet
      hash: md5
      md5: 28f51ea82daeb34255a0ff28ef1d0814
      size: 1292973
      cloud:
        minio:
          etag: 28f51ea82daeb34255a0ff28ef1d0814
          version_id: 8048f0da-2e9e-45b1-b2d3-94b32f787363
  get_tags:
    cmd: python src/data/get_tags.py --df_path="data/intermediate_data/comments_tags.parquet"
      --save_path="data/intermediate_data/df_tagged.parquet"
    deps:
    - path: config.yaml
      hash: md5
      md5: 426b96727f7279748f8b2a6bf8d4bfec
      size: 581
    - path: src/data/get_tags.py
      hash: md5
      md5: f3ec4a236f55941ebc24abbb7a735af6
      size: 1501
    - path: src/models/roberta.py
      hash: md5
      md5: 8ffca925d6a2effb8a0f9e3ce5513513
      size: 5122
    outs:
    - path: data/intermediate_data/df_tagged.parquet
      hash: md5
      md5: d8fab247e8b48bce649be99e58d65aa3
      size: 2217109
      cloud:
        minio:
          etag: d8fab247e8b48bce649be99e58d65aa3
          version_id: 4bab4769-f43c-4c11-b03e-687b5c218e59
    - path: models/roberta/models--AlexKay--xlm-roberta-large-qa-multilingual-finedtuned-ru
      hash: md5
      files:
      - relpath: .no_exist/6cc14366f0cc95428a695d30594a93dd6935d800/added_tokens.json
        md5: d41d8cd98f00b204e9800998ecf8427e
        size: 0
        cloud:
          minio:
            etag: d41d8cd98f00b204e9800998ecf8427e
            version_id: 8599be46-dbb7-4af5-afc8-2456dc0de967
      - relpath: .no_exist/6cc14366f0cc95428a695d30594a93dd6935d800/model.safetensors
        md5: d41d8cd98f00b204e9800998ecf8427e
        size: 0
        cloud:
          minio:
            etag: d41d8cd98f00b204e9800998ecf8427e
            version_id: 9d1bec5c-a491-4d1c-b7a1-2571696814a9
      - relpath: .no_exist/6cc14366f0cc95428a695d30594a93dd6935d800/model.safetensors.index.json
        md5: d41d8cd98f00b204e9800998ecf8427e
        size: 0
        cloud:
          minio:
            etag: d41d8cd98f00b204e9800998ecf8427e
            version_id: 81e1590e-6c02-4f0b-afe2-ae8024e9b57c
      - relpath: blobs/154f43c670c33e76b909e3c6c7a9d3d89402579fb6cd1a0414a98d3e165346cd
        md5: 85428479f4a9f2b2896783468970ce57
        size: 2235540992
        cloud:
          minio:
            etag: 7f2c15783170adf2582a65f18a5cd4d2-43
            version_id: fd960d44-4a2d-44df-99ca-ed680b7dfb33
      - relpath: blobs/3dbb2cf43b7d63b00d2fd65e77d1522abf82562b
        md5: 3fd33a2bd999bf8fbfea9fd64e6d6770
        size: 781
        cloud:
          minio:
            etag: 3fd33a2bd999bf8fbfea9fd64e6d6770
            version_id: 520710f0-ceb1-4713-a290-e0555013e217
      - relpath: blobs/6cd1d9021e10d47aed59399af6b0e30312b46ca4
        md5: 72e6c8ab541f1ff24b139c96216fe8c9
        size: 150
        cloud:
          minio:
            etag: 72e6c8ab541f1ff24b139c96216fe8c9
            version_id: 70e00c57-8a09-4018-8726-6dcef48af45b
      - relpath: blobs/be40185617dee2e5940b7ad8c9aec5fc8babcf2a
        md5: 6151a01f28dc31a96d6933ff0648c85c
        size: 9096735
        cloud:
          minio:
            etag: 6151a01f28dc31a96d6933ff0648c85c
            version_id: 366d485a-ede8-45dd-b59a-63a5b18f8291
      - relpath: blobs/cfc8146abe2a0488e9e2a0c56de7952f7c11ab059eca145a0a727afce0db2865
        md5: bf25eb5120ad92ef5c7d8596b5dc4046
        size: 5069051
        cloud:
          minio:
            etag: bf25eb5120ad92ef5c7d8596b5dc4046
            version_id: 176d63ef-52ce-429b-8a9b-2ddccdf9cbc5
      - relpath: blobs/ee317c016226c12022b10f06e5f95f53c284407e
        md5: cdbd02dc6d8c7a736ddb383d85d85877
        size: 516
        cloud:
          minio:
            etag: cdbd02dc6d8c7a736ddb383d85d85877
            version_id: 7cc018c3-f3fb-423e-ad39-8c13d473b7bd
      - relpath: refs/main
        md5: 5b82c7d5b69fd14015bda8a3573af1ec
        size: 40
        cloud:
          minio:
            etag: 5b82c7d5b69fd14015bda8a3573af1ec
            version_id: 2025d97b-81f1-4157-ab51-bb3f4e79c4a4
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/config.json
        md5: 3fd33a2bd999bf8fbfea9fd64e6d6770
        size: 781
        cloud:
          minio:
            etag: 3fd33a2bd999bf8fbfea9fd64e6d6770
            version_id: d5eaad47-bbc9-4f9b-b230-160f85f97a50
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/pytorch_model.bin
        md5: 85428479f4a9f2b2896783468970ce57
        size: 2235540992
        cloud:
          minio:
            etag: 7f2c15783170adf2582a65f18a5cd4d2-43
            version_id: 9fd34fd4-6613-4614-96da-c6d21ab2acc0
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/sentencepiece.bpe.model
        md5: bf25eb5120ad92ef5c7d8596b5dc4046
        size: 5069051
        cloud:
          minio:
            etag: bf25eb5120ad92ef5c7d8596b5dc4046
            version_id: 19927e49-52f9-4ba2-97b1-3d8b195e425d
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/special_tokens_map.json
        md5: 72e6c8ab541f1ff24b139c96216fe8c9
        size: 150
        cloud:
          minio:
            etag: 72e6c8ab541f1ff24b139c96216fe8c9
            version_id: 5305f237-e06c-4f24-ba53-39a905c3a74d
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/tokenizer.json
        md5: 6151a01f28dc31a96d6933ff0648c85c
        size: 9096735
        cloud:
          minio:
            etag: 6151a01f28dc31a96d6933ff0648c85c
            version_id: 4f676a94-d4cb-41df-934b-126d17335810
      - relpath: snapshots/6cc14366f0cc95428a695d30594a93dd6935d800/tokenizer_config.json
        md5: cdbd02dc6d8c7a736ddb383d85d85877
        size: 516
        cloud:
          minio:
            etag: cdbd02dc6d8c7a736ddb383d85d85877
            version_id: d7252875-2c7e-4942-a9de-b90729d064b2
  get_final_df:
    cmd: python src/data/get_final_df.py --df_tagged_path="data/intermediate_data/df_tagged.parquet"
      --save_path="data/prepared_data/prepared_df.parquet"
    deps:
    - path: config.yaml
      hash: md5
      md5: 426b96727f7279748f8b2a6bf8d4bfec
      size: 581
    - path: src/data/get_final_df.py
      hash: md5
      md5: 4f6631d75ab74fb9ea15497174c7fef4
      size: 1175
    outs:
    - path: data/prepared_data/prepared_df.parquet
      hash: md5
      md5: f94222ca7a363064fc4abba12ab7f181
      size: 2811834
      cloud:
        minio:
          etag: f94222ca7a363064fc4abba12ab7f181
          version_id: 3861d693-454d-45c3-839f-7c422c9e885c
